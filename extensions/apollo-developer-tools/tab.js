(()=>{"use strict";var e={9431:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(3256));class i extends s.default{constructor(){super(...arguments),this.connections=new Map,this.addConnection=(e,t)=>{function n(e){return t(e.detail)}return this.addEventListener(e,n),this.connections.set(e,n),()=>this.removeConnection(e)},this.removeConnection=e=>{const t=this.connections.get(e);t&&(this.removeEventListener(e,t),this.connections.delete(e))},this.createEvent=e=>new CustomEvent(e,{detail:{}}),this.broadcast=e=>{let t=this.createEvent(e.message);if(null==e?void 0:e.to){let n,o,s=e.to;t.detail.to=s,s.includes(":")&&([s,...o]=e.to.split(":"),n=o.join(":")),this.connections.has(s)&&(t=this.createEvent(s),t.detail.to=n)}t.detail.message=e.message,t.detail.payload=e.payload,this.dispatchEvent(t)},this.listen=(e,t)=>{function n(e){return t(e.detail)}return this.addEventListener(e,n),()=>{this.removeEventListener(e,n)}},this.send=e=>{this.broadcast(e)},this.forward=(e,t)=>this.listen(e,(e=>{this.broadcast(Object.assign(Object.assign({},e),{to:t}))}))}}t.default=i},3256:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.listeners=new Map}addEventListener(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);this.listeners.get(e).add(t)}removeEventListener(e,t){if(this.listeners.has(e)){this.listeners.get(e).delete(t)}}dispatchEvent(e){if(this.listeners.has(null==e?void 0:e.type)){this.listeners.get(e.type).forEach((t=>t(e)))}}}},9392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXPLORER_SUBSCRIPTION_TERMINATION=t.EMBEDDABLE_EXPLORER_URL=t.RELOAD_TAB_COMPLETE=t.RELOADING_TAB=t.EXPLORER_RESPONSE=t.EXPLORER_REQUEST=t.PANEL_CLOSED=t.PANEL_OPEN=t.UPDATE=t.REQUEST_DATA=t.ACTION_HOOK_FIRED=t.CREATE_DEVTOOLS_PANEL=t.APOLLO_CLIENT_FOUND=t.FIND_APOLLO_CLIENT=t.DEVTOOLS_INITIALIZED=t.REQUEST_TAB_ID=t.CLIENT_FOUND=void 0,t.CLIENT_FOUND="client-found",t.REQUEST_TAB_ID="request-tab-id",t.DEVTOOLS_INITIALIZED="devtools-initialized",t.FIND_APOLLO_CLIENT="find-apollo-client",t.APOLLO_CLIENT_FOUND="apollo-client-found",t.CREATE_DEVTOOLS_PANEL="create-devtools-panel",t.ACTION_HOOK_FIRED="action-hook-fired",t.REQUEST_DATA="request-data",t.UPDATE="update",t.PANEL_OPEN="panel-open",t.PANEL_CLOSED="panel-closed",t.EXPLORER_REQUEST="explorer-request",t.EXPLORER_RESPONSE="explorer-response",t.RELOADING_TAB="reloading-tab",t.RELOAD_TAB_COMPLETE="reload-tab-complete",t.EMBEDDABLE_EXPLORER_URL="https://explorer.embed.apollographql.com",t.EXPLORER_SUBSCRIPTION_TERMINATION="ExplorerSubscriptionTermination"},7266:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{E(o.next(e))}catch(e){i(e)}}function a(e){try{E(o.throw(e))}catch(e){i(e)}}function E(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}E((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(9431)),r=n(9392);t.default=new Promise((e=>o(void 0,void 0,void 0,(function*(){const t=yield new Promise((e=>{chrome.runtime.sendMessage({message:r.REQUEST_TAB_ID},(function(t){e(t)}))})),n=new i.default,o=chrome.runtime.connect({name:`tab-${t}`});n.addConnection("background",(e=>{o.postMessage(e)})),o.onMessage.addListener(n.broadcast),window.addEventListener("message",(e=>{n.broadcast(null==e?void 0:e.data)})),n.addConnection("client",(e=>{window.postMessage(e,"*")}));const s=`background:devtools-${t}`;n.forward(r.CLIENT_FOUND,s),n.forward(r.CREATE_DEVTOOLS_PANEL,s),n.forward(r.ACTION_HOOK_FIRED,s),n.forward(r.UPDATE,s),n.forward(r.RELOADING_TAB,s),n.forward(r.RELOAD_TAB_COMPLETE,s),n.forward(r.EXPLORER_RESPONSE,`${s}:explorer`);const a=yield Promise.resolve({tab:n,id:t});e(a)}))))}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(()=>{if({value:!0},n(7266),"object"==typeof document&&document instanceof HTMLDocument){const e=document.createElement("script");e.setAttribute("type","module"),e.setAttribute("src",chrome.extension.getURL("hook.js"));const t=document.head||document.getElementsByTagName("head")[0]||document.documentElement;t.insertBefore(e,t.lastChild)}})()})();